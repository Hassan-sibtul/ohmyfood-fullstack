{"ast":null,"code":"var _jsxFileName = \"/Users/sibtulhassan/Downloads/ohmyfood-fullstack/client/src/pages/Payment.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { CartContext } from \"../context/CartContext\";\nimport { Elements, CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport API from \"../api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst stripePromise = loadStripe(\"pk_test_51SL4gHFrLsiRJStWdnqFsEdHiiDQYDvTOGEe53lwevsgEMz2PxhP4QjKcqgbf8h2N8EKmkIXIDLfELusYLepJqNE00oIRsCveh\");\nfunction CheckoutForm({\n  address,\n  cart\n}) {\n  _s();\n  const stripe = useStripe();\n  const elements = useElements();\n  const navigate = useNavigate();\n  const {\n    clearCart\n  } = useContext(CartContext);\n  const [loading, setLoading] = useState(false);\n  const total = cart.reduce((sum, item) => sum + (item.price || 0) * (item.qty || 0), 0);\n  const [billingDetails, setBillingDetails] = useState({\n    name: \"\",\n    email: \"\",\n    line1: \"\",\n    city: \"\",\n    postcode: \"\",\n    country: \"GB\" // Default for UK\n  });\n  useEffect(() => {\n    const fetchProfile = async () => {\n      try {\n        const {\n          data\n        } = await API.get(\"/api/users/profile\", {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n          }\n        });\n        if (data !== null && data !== void 0 && data.billingDetails) setBillingDetails(data.billingDetails);\n      } catch (err) {\n        console.warn(\"No saved profile / fetch failed:\", err === null || err === void 0 ? void 0 : err.message);\n      }\n    };\n    fetchProfile();\n  }, []);\n  const handleChange = e => {\n    setBillingDetails({\n      ...billingDetails,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const token = localStorage.getItem(\"token\");\n    if (!token) return alert(\"You must be logged in to make a payment.\");\n    if (!stripe || !elements) return alert(\"Stripe not ready yet.\");\n    setLoading(true);\n    try {\n      // 1️⃣ Create a Stripe Payment Intent for total amount\n      const {\n        data: paymentIntent\n      } = await API.post(\"/api/payment/create-payment-intent\", {\n        amount: Math.round(total * 100)\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const clientSecret = paymentIntent === null || paymentIntent === void 0 ? void 0 : paymentIntent.clientSecret;\n      if (!clientSecret) throw new Error(\"Missing client secret from server.\");\n\n      // 2️⃣ Confirm payment with Stripe\n      const card = elements.getElement(CardElement);\n      const confirm = await stripe.confirmCardPayment(clientSecret, {\n        payment_method: {\n          card,\n          billing_details: {\n            name: billingDetails.name,\n            email: billingDetails.email,\n            address: {\n              line1: billingDetails.line1,\n              postal_code: billingDetails.postcode,\n              // ✅ send as postal_code\n              city: billingDetails.city,\n              country: billingDetails.country\n            }\n          }\n        }\n      });\n      if (confirm.error) throw confirm.error;\n      if (confirm.paymentIntent.status !== \"succeeded\") throw new Error(\"Payment not successful.\");\n\n      // 3️⃣ Group items by restaurant\n      const groupedByRestaurant = cart.reduce((acc, item) => {\n        if (!item.restaurantId) {\n          console.warn(\"Item missing restaurantId:\", item);\n          return acc;\n        }\n        if (!acc[item.restaurantId]) acc[item.restaurantId] = [];\n        acc[item.restaurantId].push(item);\n        return acc;\n      }, {});\n\n      // 4️⃣ Create one order per restaurant\n      const createdOrders = [];\n      for (const [restaurantId, items] of Object.entries(groupedByRestaurant)) {\n        const orderTotal = items.reduce((sum, i) => sum + i.price * i.qty, 0);\n        const orderRes = await API.post(\"/api/orders\", {\n          restaurantId,\n          items,\n          totalAmount: orderTotal,\n          address\n        }, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        createdOrders.push(orderRes.data);\n      }\n\n      // 5️⃣ Save billing info for next time\n      try {\n        await API.put(\"/api/users/profile\", {\n          billingDetails\n        }, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n      } catch (err) {\n        console.warn(\"Profile update failed:\", err === null || err === void 0 ? void 0 : err.message);\n      }\n\n      // 6️⃣ Clear cart and navigate\n      clearCart();\n      localStorage.removeItem(\"cart\");\n      navigate(\"/order-confirmation\", {\n        state: {\n          total,\n          orders: createdOrders\n        },\n        replace: true\n      });\n    } catch (err) {\n      console.error(\"❌ Payment error:\", err);\n      alert((err === null || err === void 0 ? void 0 : err.message) || \"Payment failed. Please check your card details and try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"payment-form\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Billing Information\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      name: \"name\",\n      placeholder: \"Cardholder Name\",\n      value: billingDetails.name,\n      onChange: handleChange,\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"email\",\n      name: \"email\",\n      placeholder: \"Email\",\n      value: billingDetails.email,\n      onChange: handleChange,\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      name: \"line1\",\n      placeholder: \"Street Address\",\n      value: billingDetails.line1,\n      onChange: handleChange,\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      name: \"city\",\n      placeholder: \"City\",\n      value: billingDetails.city,\n      onChange: handleChange,\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      name: \"postcode\",\n      placeholder: \"Postcode\" // ✅ UK-friendly label\n      ,\n      value: billingDetails.postcode,\n      onChange: handleChange,\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Payment\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        border: \"1px solid #ddd\",\n        padding: 10,\n        borderRadius: 6\n      },\n      children: /*#__PURE__*/_jsxDEV(CardElement, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      disabled: !stripe || loading,\n      className: \"btn-primary\",\n      style: {\n        marginTop: 12\n      },\n      children: loading ? \"Processing...\" : `Pay £${total.toFixed(2)}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 160,\n    columnNumber: 5\n  }, this);\n}\n_s(CheckoutForm, \"CsW3HL35gsbX+bOYget5eMlHkKg=\", false, function () {\n  return [useStripe, useElements, useNavigate];\n});\n_c = CheckoutForm;\nexport default function Payment() {\n  _s2();\n  const location = useLocation();\n  const {\n    address,\n    cart\n  } = location.state || {\n    address: {},\n    cart: []\n  };\n  return /*#__PURE__*/_jsxDEV(Elements, {\n    stripe: stripePromise,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"payment-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Payment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CheckoutForm, {\n        address: address,\n        cart: cart\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 225,\n    columnNumber: 5\n  }, this);\n}\n_s2(Payment, \"pkHmaVRPskBaU4tMJuJJpV42k1I=\", false, function () {\n  return [useLocation];\n});\n_c2 = Payment;\nvar _c, _c2;\n$RefreshReg$(_c, \"CheckoutForm\");\n$RefreshReg$(_c2, \"Payment\");","map":{"version":3,"names":["React","useContext","useEffect","useState","useLocation","useNavigate","loadStripe","CartContext","Elements","CardElement","useStripe","useElements","API","jsxDEV","_jsxDEV","stripePromise","CheckoutForm","address","cart","_s","stripe","elements","navigate","clearCart","loading","setLoading","total","reduce","sum","item","price","qty","billingDetails","setBillingDetails","name","email","line1","city","postcode","country","fetchProfile","data","get","headers","Authorization","localStorage","getItem","err","console","warn","message","handleChange","e","target","value","handleSubmit","preventDefault","token","alert","paymentIntent","post","amount","Math","round","clientSecret","Error","card","getElement","confirm","confirmCardPayment","payment_method","billing_details","postal_code","error","status","groupedByRestaurant","acc","restaurantId","push","createdOrders","items","Object","entries","orderTotal","i","orderRes","totalAmount","put","removeItem","state","orders","replace","onSubmit","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","required","style","border","padding","borderRadius","disabled","marginTop","toFixed","_c","Payment","_s2","location","_c2","$RefreshReg$"],"sources":["/Users/sibtulhassan/Downloads/ohmyfood-fullstack/client/src/pages/Payment.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { CartContext } from \"../context/CartContext\";\nimport {\n  Elements,\n  CardElement,\n  useStripe,\n  useElements,\n} from \"@stripe/react-stripe-js\";\nimport API from \"../api\";\n\nconst stripePromise = loadStripe(\n  \"pk_test_51SL4gHFrLsiRJStWdnqFsEdHiiDQYDvTOGEe53lwevsgEMz2PxhP4QjKcqgbf8h2N8EKmkIXIDLfELusYLepJqNE00oIRsCveh\"\n);\n\nfunction CheckoutForm({ address, cart }) {\n  const stripe = useStripe();\n  const elements = useElements();\n  const navigate = useNavigate();\n  const { clearCart } = useContext(CartContext);\n  const [loading, setLoading] = useState(false);\n\n  const total = cart.reduce(\n    (sum, item) => sum + (item.price || 0) * (item.qty || 0),\n    0\n  );\n\n  const [billingDetails, setBillingDetails] = useState({\n    name: \"\",\n    email: \"\",\n    line1: \"\",\n    city: \"\",\n    postcode: \"\",\n    country: \"GB\", // Default for UK\n  });\n\n  useEffect(() => {\n    const fetchProfile = async () => {\n      try {\n        const { data } = await API.get(\"/api/users/profile\", {\n          headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\n        });\n        if (data?.billingDetails) setBillingDetails(data.billingDetails);\n      } catch (err) {\n        console.warn(\"No saved profile / fetch failed:\", err?.message);\n      }\n    };\n    fetchProfile();\n  }, []);\n\n  const handleChange = (e) => {\n    setBillingDetails({ ...billingDetails, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const token = localStorage.getItem(\"token\");\n    if (!token) return alert(\"You must be logged in to make a payment.\");\n    if (!stripe || !elements) return alert(\"Stripe not ready yet.\");\n\n    setLoading(true);\n    try {\n      // 1️⃣ Create a Stripe Payment Intent for total amount\n      const { data: paymentIntent } = await API.post(\n        \"/api/payment/create-payment-intent\",\n        { amount: Math.round(total * 100) },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n\n      const clientSecret = paymentIntent?.clientSecret;\n      if (!clientSecret) throw new Error(\"Missing client secret from server.\");\n\n      // 2️⃣ Confirm payment with Stripe\n      const card = elements.getElement(CardElement);\n      const confirm = await stripe.confirmCardPayment(clientSecret, {\n        payment_method: {\n          card,\n          billing_details: {\n            name: billingDetails.name,\n            email: billingDetails.email,\n            address: {\n              line1: billingDetails.line1,\n              postal_code: billingDetails.postcode, // ✅ send as postal_code\n              city: billingDetails.city,\n              country: billingDetails.country,\n            },\n          },\n        },\n      });\n\n      if (confirm.error) throw confirm.error;\n      if (confirm.paymentIntent.status !== \"succeeded\")\n        throw new Error(\"Payment not successful.\");\n\n      // 3️⃣ Group items by restaurant\n      const groupedByRestaurant = cart.reduce((acc, item) => {\n        if (!item.restaurantId) {\n          console.warn(\"Item missing restaurantId:\", item);\n          return acc;\n        }\n        if (!acc[item.restaurantId]) acc[item.restaurantId] = [];\n        acc[item.restaurantId].push(item);\n        return acc;\n      }, {});\n\n      // 4️⃣ Create one order per restaurant\n      const createdOrders = [];\n      for (const [restaurantId, items] of Object.entries(groupedByRestaurant)) {\n        const orderTotal = items.reduce((sum, i) => sum + i.price * i.qty, 0);\n\n        const orderRes = await API.post(\n          \"/api/orders\",\n          {\n            restaurantId,\n            items,\n            totalAmount: orderTotal,\n            address,\n          },\n          { headers: { Authorization: `Bearer ${token}` } }\n        );\n\n        createdOrders.push(orderRes.data);\n      }\n\n      // 5️⃣ Save billing info for next time\n      try {\n        await API.put(\n          \"/api/users/profile\",\n          { billingDetails },\n          { headers: { Authorization: `Bearer ${token}` } }\n        );\n      } catch (err) {\n        console.warn(\"Profile update failed:\", err?.message);\n      }\n\n      // 6️⃣ Clear cart and navigate\n      clearCart();\n      localStorage.removeItem(\"cart\");\n\n      navigate(\"/order-confirmation\", {\n        state: {\n          total,\n          orders: createdOrders,\n        },\n        replace: true,\n      });\n    } catch (err) {\n      console.error(\"❌ Payment error:\", err);\n      alert(\n        err?.message ||\n          \"Payment failed. Please check your card details and try again.\"\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"payment-form\">\n      <h3>Billing Information</h3>\n      <input\n        type=\"text\"\n        name=\"name\"\n        placeholder=\"Cardholder Name\"\n        value={billingDetails.name}\n        onChange={handleChange}\n        required\n      />\n      <input\n        type=\"email\"\n        name=\"email\"\n        placeholder=\"Email\"\n        value={billingDetails.email}\n        onChange={handleChange}\n        required\n      />\n      <input\n        type=\"text\"\n        name=\"line1\"\n        placeholder=\"Street Address\"\n        value={billingDetails.line1}\n        onChange={handleChange}\n        required\n      />\n      <input\n        type=\"text\"\n        name=\"city\"\n        placeholder=\"City\"\n        value={billingDetails.city}\n        onChange={handleChange}\n        required\n      />\n      <input\n        type=\"text\"\n        name=\"postcode\"\n        placeholder=\"Postcode\" // ✅ UK-friendly label\n        value={billingDetails.postcode}\n        onChange={handleChange}\n        required\n      />\n\n      <h3>Payment</h3>\n      <div style={{ border: \"1px solid #ddd\", padding: 10, borderRadius: 6 }}>\n        <CardElement />\n      </div>\n\n      <button\n        type=\"submit\"\n        disabled={!stripe || loading}\n        className=\"btn-primary\"\n        style={{ marginTop: 12 }}\n      >\n        {loading ? \"Processing...\" : `Pay £${total.toFixed(2)}`}\n      </button>\n    </form>\n  );\n}\n\nexport default function Payment() {\n  const location = useLocation();\n  const { address, cart } = location.state || { address: {}, cart: [] };\n\n  return (\n    <Elements stripe={stripePromise}>\n      <div className=\"payment-container\">\n        <h2>Payment</h2>\n        <CheckoutForm address={address} cart={cart} />\n      </div>\n    </Elements>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}