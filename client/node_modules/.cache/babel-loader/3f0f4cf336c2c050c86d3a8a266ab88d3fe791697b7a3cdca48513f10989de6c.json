{"ast":null,"code":"var _jsxFileName = \"/Users/sibtulhassan/Downloads/ohmyfood-fullstack/client/src/pages/Payment.js\",\n  _s = $RefreshSig$();\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CheckoutForm({\n  cart\n}) {\n  _s();\n  const stripe = useStripe();\n  const elements = useElements();\n  const navigate = useNavigate();\n  const [billingDetails, setBillingDetails] = useState({\n    name: \"\",\n    email: \"\",\n    line1: \"\",\n    city: \"\",\n    country: \"GB\" // default UK\n  });\n  const total = cart.reduce((sum, item) => sum + item.price * item.qty, 0);\n  const handleChange = e => {\n    setBillingDetails({\n      ...billingDetails,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!stripe || !elements) return;\n\n    // Get client secret from backend\n    const {\n      data\n    } = await API.post(\"/payment/create-payment-intent\", {\n      amount: Math.round(total * 100) // in pence\n    });\n    const result = await stripe.confirmCardPayment(data.clientSecret, {\n      payment_method: {\n        card: elements.getElement(CardElement),\n        billing_details: {\n          name: billingDetails.name,\n          email: billingDetails.email,\n          address: {\n            line1: billingDetails.line1,\n            city: billingDetails.city,\n            country: billingDetails.country // must be ISO code (GB, US, FR…)\n          }\n        }\n      }\n    });\n    if (result.error) {\n      alert(result.error.message);\n    } else if (result.paymentIntent.status === \"succeeded\") {\n      alert(\"✅ Payment successful!\");\n      localStorage.removeItem(\"cart\");\n      navigate(\"/\", {\n        replace: true\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"payment-form\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Billing Details\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      name: \"name\",\n      placeholder: \"Full Name\",\n      value: billingDetails.name,\n      onChange: handleChange,\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"email\",\n      name: \"email\",\n      placeholder: \"Email Address\",\n      value: billingDetails.email,\n      onChange: handleChange,\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      name: \"line1\",\n      placeholder: \"Street Address\",\n      value: billingDetails.line1,\n      onChange: handleChange,\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      name: \"city\",\n      placeholder: \"City\",\n      value: billingDetails.city,\n      onChange: handleChange,\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      name: \"country\",\n      value: billingDetails.country,\n      onChange: handleChange,\n      required: true,\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"GB\",\n        children: \"United Kingdom\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"US\",\n        children: \"United States\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"FR\",\n        children: \"France\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"DE\",\n        children: \"Germany\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"PK\",\n        children: \"Pakistan\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Card Details\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardElement, {\n      className: \"card-element\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      disabled: !stripe,\n      className: \"btn-primary\",\n      children: [\"Pay \\xA3\", total.toFixed(2)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n_s(CheckoutForm, \"7iGPyr3tLhPK8GM73nKCd05Ddn8=\", true);\n_c = CheckoutForm;\nvar _c;\n$RefreshReg$(_c, \"CheckoutForm\");","map":{"version":3,"names":["CheckoutForm","cart","_s","stripe","useStripe","elements","useElements","navigate","useNavigate","billingDetails","setBillingDetails","useState","name","email","line1","city","country","total","reduce","sum","item","price","qty","handleChange","e","target","value","handleSubmit","preventDefault","data","API","post","amount","Math","round","result","confirmCardPayment","clientSecret","payment_method","card","getElement","CardElement","billing_details","address","error","alert","message","paymentIntent","status","localStorage","removeItem","replace","_jsxDEV","onSubmit","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","required","disabled","toFixed","_c","$RefreshReg$"],"sources":["/Users/sibtulhassan/Downloads/ohmyfood-fullstack/client/src/pages/Payment.js"],"sourcesContent":["function CheckoutForm({ cart }) {\n  const stripe = useStripe();\n  const elements = useElements();\n  const navigate = useNavigate();\n\n  const [billingDetails, setBillingDetails] = useState({\n    name: \"\",\n    email: \"\",\n    line1: \"\",\n    city: \"\",\n    country: \"GB\", // default UK\n  });\n\n  const total = cart.reduce((sum, item) => sum + item.price * item.qty, 0);\n\n  const handleChange = (e) => {\n    setBillingDetails({ ...billingDetails, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!stripe || !elements) return;\n\n    // Get client secret from backend\n    const { data } = await API.post(\"/payment/create-payment-intent\", {\n      amount: Math.round(total * 100), // in pence\n    });\n\n    const result = await stripe.confirmCardPayment(data.clientSecret, {\n      payment_method: {\n        card: elements.getElement(CardElement),\n        billing_details: {\n          name: billingDetails.name,\n          email: billingDetails.email,\n          address: {\n            line1: billingDetails.line1,\n            city: billingDetails.city,\n            country: billingDetails.country, // must be ISO code (GB, US, FR…)\n          },\n        },\n      },\n    });\n\n    if (result.error) {\n      alert(result.error.message);\n    } else if (result.paymentIntent.status === \"succeeded\") {\n      alert(\"✅ Payment successful!\");\n      localStorage.removeItem(\"cart\");\n      navigate(\"/\", { replace: true });\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"payment-form\">\n      <h3>Billing Details</h3>\n      <input\n        type=\"text\"\n        name=\"name\"\n        placeholder=\"Full Name\"\n        value={billingDetails.name}\n        onChange={handleChange}\n        required\n      />\n      <input\n        type=\"email\"\n        name=\"email\"\n        placeholder=\"Email Address\"\n        value={billingDetails.email}\n        onChange={handleChange}\n        required\n      />\n      <input\n        type=\"text\"\n        name=\"line1\"\n        placeholder=\"Street Address\"\n        value={billingDetails.line1}\n        onChange={handleChange}\n        required\n      />\n      <input\n        type=\"text\"\n        name=\"city\"\n        placeholder=\"City\"\n        value={billingDetails.city}\n        onChange={handleChange}\n        required\n      />\n\n      <select\n        name=\"country\"\n        value={billingDetails.country}\n        onChange={handleChange}\n        required\n      >\n        <option value=\"GB\">United Kingdom</option>\n        <option value=\"US\">United States</option>\n        <option value=\"FR\">France</option>\n        <option value=\"DE\">Germany</option>\n        <option value=\"PK\">Pakistan</option>\n      </select>\n\n      <h3>Card Details</h3>\n      <CardElement className=\"card-element\" />\n\n      <button type=\"submit\" disabled={!stripe} className=\"btn-primary\">\n        Pay £{total.toFixed(2)}\n      </button>\n    </form>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}