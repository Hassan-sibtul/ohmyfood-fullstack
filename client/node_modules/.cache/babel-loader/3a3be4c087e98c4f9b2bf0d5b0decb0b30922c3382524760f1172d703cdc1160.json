{"ast":null,"code":"// client/src/context/CartContext.js import React, { createContext, useState, useEffect } from \"react\"; export const CartContext = createContext(); export const CartProvider = ({ children }) => { const [cart, setCart] = useState([]); // Load cart from localStorage on startup useEffect(() => { const saved = JSON.parse(localStorage.getItem(\"cart\") || \"[]\"); setCart(saved); }, []); // Save cart whenever it changes useEffect(() => { localStorage.setItem(\"cart\", JSON.stringify(cart)); }, [cart]); // ✅ Always attach restaurantId + menuItemId const addToCart = (item) => { if (!item.restaurantId) { console.warn(\"❌ Item missing restaurantId:\", item); } setCart((prev) => { const exists = prev.find((i) => i._id === item._id); if (exists) { return prev.map((i) => i._id === item._id ? { ...i, qty: i.qty + (item.qty || 1) } : i ); } return [...prev, { ...item, qty: item.qty || 1 }]; }); }; const removeFromCart = (id) => { setCart((prev) => prev.filter((i) => i.menuItemId !== id)); }; const updateQty = (id, qty) => { setCart((prev) => prev.map((i) => (i.menuItemId === id ? { ...i, qty } : i)) ); }; const clearCart = () => { setCart([]); }; return ( <CartContext.Provider value={{ cart, addToCart, removeFromCart, updateQty, clearCart }} > {children} </CartContext.Provider> ); };","map":{"version":3,"names":[],"sources":["/Users/sibtulhassan/Downloads/ohmyfood-fullstack/client/src/context/CartContext.js"],"sourcesContent":["// client/src/context/CartContext.js import React, { createContext, useState, useEffect } from \"react\"; export const CartContext = createContext(); export const CartProvider = ({ children }) => { const [cart, setCart] = useState([]); // Load cart from localStorage on startup useEffect(() => { const saved = JSON.parse(localStorage.getItem(\"cart\") || \"[]\"); setCart(saved); }, []); // Save cart whenever it changes useEffect(() => { localStorage.setItem(\"cart\", JSON.stringify(cart)); }, [cart]); // ✅ Always attach restaurantId + menuItemId const addToCart = (item) => { if (!item.restaurantId) { console.warn(\"❌ Item missing restaurantId:\", item); } setCart((prev) => { const exists = prev.find((i) => i._id === item._id); if (exists) { return prev.map((i) => i._id === item._id ? { ...i, qty: i.qty + (item.qty || 1) } : i ); } return [...prev, { ...item, qty: item.qty || 1 }]; }); }; const removeFromCart = (id) => { setCart((prev) => prev.filter((i) => i.menuItemId !== id)); }; const updateQty = (id, qty) => { setCart((prev) => prev.map((i) => (i.menuItemId === id ? { ...i, qty } : i)) ); }; const clearCart = () => { setCart([]); }; return ( <CartContext.Provider value={{ cart, addToCart, removeFromCart, updateQty, clearCart }} > {children} </CartContext.Provider> ); };\n\n\n\n\n\n\n\n"],"mappings":"AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}