{"ast":null,"code":"import React,{useState,useEffect}from'react';import API from'../api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Cart(){const[cart,setCart]=useState(JSON.parse(localStorage.getItem('cart')||'[]'));const[address,setAddress]=useState('');useEffect(()=>localStorage.setItem('cart',JSON.stringify(cart)),[cart]);function changeQty(index,delta){const c=[...cart];c[index].qty=Math.max(1,c[index].qty+delta);setCart(c);}async function placeOrder(){const user=JSON.parse(localStorage.getItem('user')||'null');if(!user){alert('Please login');return;}const total=cart.reduce((s,i)=>s+i.price*i.qty,0);try{const res=await API.post('/orders',{items:cart,total,address});alert('Order placed!');setCart([]);}catch(err){console.error(err);alert('Error placing order');}}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Your cart\"}),cart.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"Cart empty\"}),cart.map((it,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:12,alignItems:'center',padding:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{flex:1},children:it.name}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",(it.price*it.qty).toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>changeQty(idx,-1),children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{style:{margin:'0 8px'},children:it.qty}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>changeQty(idx,1),children:\"+\"})]})]},it.menuItemId)),cart.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:16},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Delivery address\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{value:address,onChange:e=>setAddress(e.target.value),style:{width:'100%',padding:8}})]}),/*#__PURE__*/_jsx(\"button\",{onClick:placeOrder,style:{marginTop:12},children:\"Place Order\"})]})]});}","map":{"version":3,"names":["React","useState","useEffect","API","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Cart","cart","setCart","JSON","parse","localStorage","getItem","address","setAddress","setItem","stringify","changeQty","index","delta","c","qty","Math","max","placeOrder","user","alert","total","reduce","s","i","price","res","post","items","err","console","error","children","length","map","it","idx","style","display","gap","alignItems","padding","flex","name","toFixed","onClick","margin","menuItemId","marginTop","value","onChange","e","target","width"],"sources":["/Users/sibtulhassan/Downloads/ohmyfood-fullstack/client/src/pages/Cart.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport API from '../api';\n\nexport default function Cart(){\n  const [cart, setCart] = useState(JSON.parse(localStorage.getItem('cart') || '[]'));\n  const [address, setAddress] = useState('');\n\n  useEffect(()=> localStorage.setItem('cart', JSON.stringify(cart)), [cart]);\n\n  function changeQty(index, delta){\n    const c = [...cart];\n    c[index].qty = Math.max(1, c[index].qty + delta);\n    setCart(c);\n  }\n\n  async function placeOrder(){\n    const user = JSON.parse(localStorage.getItem('user') || 'null');\n    if(!user){ alert('Please login'); return; }\n    const total = cart.reduce((s,i) => s + i.price * i.qty, 0);\n    try {\n      const res = await API.post('/orders', { items: cart, total, address });\n      alert('Order placed!');\n      setCart([]);\n    } catch(err){\n      console.error(err);\n      alert('Error placing order');\n    }\n  }\n\n  return (\n    <div>\n      <h1>Your cart</h1>\n      {cart.length === 0 && <p>Cart empty</p>}\n      {cart.map((it, idx)=> (\n        <div key={it.menuItemId} style={{ display:'flex', gap:12, alignItems:'center', padding:8 }}>\n          <div style={{flex:1}}>{it.name}</div>\n          <div>${(it.price * it.qty).toFixed(2)}</div>\n          <div>\n            <button onClick={()=> changeQty(idx,-1)}>-</button>\n            <span style={{ margin: '0 8px'}}>{it.qty}</span>\n            <button onClick={()=> changeQty(idx,1)}>+</button>\n          </div>\n        </div>\n      ))}\n      {cart.length>0 && <>\n        <div style={{ marginTop:16 }}>\n          <label>Delivery address</label><br/>\n          <input value={address} onChange={e=>setAddress(e.target.value)} style={{ width:'100%', padding:8 }} />\n        </div>\n        <button onClick={placeOrder} style={{ marginTop:12 }}>Place Order</button>\n      </>}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}